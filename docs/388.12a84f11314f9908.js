"use strict";(self.webpackChunkfreshCart_App=self.webpackChunkfreshCart_App||[]).push([[388],{5388:(C,m,a)=>{a.r(m),a.d(m,{ForgotpasswordComponent:()=>v});var p=a(6814),r=a(95),t=a(4769),d=a(9862);let c=(()=>{class o{constructor(e){this._httpClient=e}forgotPassword(e){return this._httpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",e)}resetCode(e){return this._httpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",e)}restPassword(e){return this._httpClient.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(d.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var u=a(7163);function f(o,i){if(1&o&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.message)}}function g(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.forgotPassword(s.forgotForm))}),t.TgZ(2,"div",3)(3,"label",4),t._uU(4,"Email:"),t.qZA(),t._UZ(5,"input",5),t.YNc(6,f,2,1,"p",6),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t._uU(9,"Forget Password"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.forgotForm),t.xp6(5),t.Q6J("ngIf",e.message)}}function l(o,i){if(1&o&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.message)}}function w(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"form",10),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.resetCode(s.resetCodeForm))}),t.TgZ(2,"div",3)(3,"label",11),t._uU(4,"Reset Code:"),t.qZA(),t._UZ(5,"input",12),t.YNc(6,l,2,1,"p",6),t.qZA(),t.TgZ(7,"div",7)(8,"button",8),t._uU(9,"Reset Code"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.resetCodeForm),t.xp6(5),t.Q6J("ngIf",e.message)}}function _(o,i){if(1&o&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.message)}}function h(o,i){if(1&o&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.message)}}function x(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"form",10),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.resetPassword(s.resetPasswordForm))}),t.TgZ(2,"div",3)(3,"label",4),t._uU(4,"Email:"),t.qZA(),t._UZ(5,"input",5),t.YNc(6,_,2,1,"p",6),t.qZA(),t.TgZ(7,"div",3)(8,"label",13),t._uU(9,"Reset Password:"),t.qZA(),t._UZ(10,"input",14),t.YNc(11,h,2,1,"p",6),t.qZA(),t.TgZ(12,"div",7)(13,"button",8),t._uU(14,"Reset Password"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.resetPasswordForm),t.xp6(5),t.Q6J("ngIf",e.message),t.xp6(5),t.Q6J("ngIf",e.message)}}let v=(()=>{class o{constructor(e,n){this._forgotpasswordService=e,this._router=n,this.step1=!0,this.step2=!1,this.step3=!1,this.message="",this.forgotForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email])}),this.resetCodeForm=new r.cw({resetCode:new r.NI("",[r.kI.required,r.kI.email])}),this.resetPasswordForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email]),newPassword:new r.NI("",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(8)])})}forgotPassword(e){this._forgotpasswordService.forgotPassword(this.forgotForm.value).subscribe({next:s=>{this.message=s.message,this.step1=!1,this.step2=!0},error:s=>{this.message=s.error.message}})}resetCode(e){this._forgotpasswordService.resetCode(this.resetCodeForm.value).subscribe({next:s=>{this.message=s.status,this.step2=!1,this.step3=!0},error:s=>{this.message=s.error.message}})}resetPassword(e){this._forgotpasswordService.restPassword(this.resetPasswordForm.value).subscribe({next:s=>{s.token&&(localStorage.setItem("userToken",s.token),this._router.navigate(["/home"]))},error:s=>{this.message=s.error.message}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(c),t.Y36(u.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-forgotpassword"]],standalone:!0,features:[t.jDz],decls:3,vars:3,consts:[["class","container my-5 w-75 mx-auto",4,"ngIf"],[1,"container","my-5","w-75","mx-auto"],[1,"",3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control","mb-3"],["class","alert alert-danger p-1 text-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"btn","bg-main","text-white"],[1,"alert","alert-danger","p-1","text-center"],[3,"formGroup","ngSubmit"],["for","resetCode"],["type","text","id","resetCode","formControlName","resetCode",1,"form-control","mb-3"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control","mb-3"]],template:function(n,s){1&n&&(t.YNc(0,g,10,2,"div",0),t.YNc(1,w,10,2,"div",0),t.YNc(2,x,15,3,"div",0)),2&n&&(t.Q6J("ngIf",s.step1),t.xp6(1),t.Q6J("ngIf",s.step2),t.xp6(1),t.Q6J("ngIf",s.step3))},dependencies:[p.ez,p.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return o})()}}]);